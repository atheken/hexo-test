<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> The "Named Generic" Anti-pattern · AndrewTheken.com</title><meta name="description" content="The &quot;Named Generic&quot; Anti-pattern - Andrew Theken"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://andrewtheken.com/atom.xml" title="AndrewTheken.com"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">The "Named Generic" Anti-pattern</h1><div class="post-info">Dec 31, 2014</div><div class="post-content"><p>Part One:<br>When it comes to code, I’m pretty particular about how things are named. To me, naming both classes and class members is one of the fine arts of software development. I actually think that this can demonstrate quite a bit about someone’s experience, what they understand about the software development life cycle, and ultimately, their conceptual understanding of Object-oriented design. That’s why this particular “code smell” bothers me so much.<br>I’ll call it the “Named Generic” pattern.<br>We’ve all seen it. A developer wanted to specify a typed parameter, but missed the boat.<br>For example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">public RecallList GetRecalls(AutoMakersList automakers)</div><div class="line">&#123;</div><div class="line">	// do something useful with each automaker and yield </div><div class="line">	//the recalls associated with them.</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>So far, this code isn’t bad. We have a decent method name, the parameter name is ok, but what are the two type definitions here:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public class AutoMakersList : List&lt;String&gt;</div><div class="line">&#123; </div><div class="line">	/*no body*/ </div><div class="line">&#125;</div><div class="line"></div><div class="line">public class RecallList : List&lt;String&gt;</div><div class="line">&#123;</div><div class="line">	/*no body*/ </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Uh oh.<br>With two classes I have simultaneously reduced flexibility, and increased complexity. From the perspective of the consumer of this method, I now have to marshal a set of strings, then add them to a new class called AutoMakersList, which I had to search out and attempt to understand.<br>From the API designer’s perspective, I’ve placed some requirement on what is legal to pass in. Except I haven’t. The list is still of string, and the last time I checked, there were no validation methods on string that validate they are auto maker’s names (C# 5.0, maybe?). So I’ve really just obfuscated what I wanted to happen, which was this:<br>“hand me an enumerable of validated automakers”<br>The same could be done with this method signature:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">///&lt;summary&gt;This will produce the recalls associated with the specified automakers.&lt;/summary&gt;</div><div class="line">///&lt;param name=&quot;automakers&quot;&gt;This is a pre-validated set of automakers </div><div class="line">/// for which recalls will be retrieved. Valid automakers </div><div class="line">/// follow these rules: .....</div><div class="line">///&lt;/param&gt;</div><div class="line">public RecallList GetRecalls(IEnumerable&lt;String&gt; automakers)</div><div class="line">&#123;</div><div class="line">	// iterate over each automaker, and do something </div><div class="line">	// interesting to yield out their recalls</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>In Visual Studio (and perhaps MonoDevelop?), I’ve now told the API consumer what I expect, they will get intellisense when they’re constructing the call. Whereas, if I just told you to hand me an AutoMakersList, there’s ambiguity in what is required. The other benefit of this approach is that I’ve reduced the calling requirements on this method. The above example is actually not done yet, and here’s where it will seemlike I’m contradicting my point, but I’m not, really.. really.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">public class Automaker</div><div class="line">&#123;</div><div class="line">	public String Name&#123;get; set;&#125;</div><div class="line">	public bool IsValid()&#123;return valid;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public RecallList GetRecalls(IEnumerable&lt;Automaker&gt; automakers)</div><div class="line">&#123;</div><div class="line">	//do something interesting.</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Instead of passing in just a a list of string, why not pass in “Automaker?” On the surface, it seems very much like just passing a simple String, the difference is that I have attached the context explicitly to the Name property, instead of implicitly from the name of the collection in which the object was stored. Let that marinate in your brain for a minute. They’re actually radically different concepts, one of them works, and IMHO, one of them doesn’t.<br>Part two:<br>“RecallList”<br>Here, the API designer got it half right. The the context for each recall is explicitly attached to the object that cares – “Recall”, but RecallList doesn’t actually add any value, it essentially says “this is a list of Recall”, which is the same thing as what “List<recall>” says, in a much more concise way. Although I think Classes are cheap cheap cheap and people are too often reluctant to add them, in this case “RecallList” is just redundant.<br>Finally, passing a list in or out adds extra overhead that neither the API designer or the caller needs. In both cases, List places extra requirements on either side of the call, when really everyone meant to say, “here’s a set of something that you can read through. (IEnumerable)” When we apply all of these suggestions together, this is the method we’re left with:</recall></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">///&lt;summary&gt;This will produce the recalls associated</div><div class="line">/// with the specified automakers.&lt;/summary&gt;</div><div class="line">///&lt;param name=&quot;automakers&quot;&gt;This is a set of automakers for </div><div class="line">/// which recalls will be retrieved.&lt;/param&gt;</div><div class="line">public IEnumerable&lt;Recall&gt; GetRecalls(IEnumerable&lt;Automaker&gt; automakers)</div><div class="line">&#123;</div><div class="line">	// iterate over each automaker, use the &quot;IsValid()&quot; method </div><div class="line">	// to determine if it should be processed, and do something </div><div class="line">	// interesting to yield out the recalls</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Hopefully the above snippet makes some sense and shows why we should fight the urge to add classes that don’t bring their own “flavor” to the application.</p>
</div></article></div></section><footer><div class="paginator"><a href="/2014/12/31/2010-06-02-behaving-badly-in-public/" class="prev">PREV</a><a href="/2014/12/31/2010-06-12-why-you-should-write-comments-before-code/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2016 <a href="http://andrewtheken.com">Andrew Theken</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>